<ROSETTASCRIPTS>


 <SCOREFXNS>

 	<hard weights=talaris2013_downAla.wts >
 		<Reweight scoretype=aa_composition weight=1.0 />
 	</hard>

 	<soft weights=soft_rep_design>
 		<Reweight scoretype=aa_composition weight=1.0 />
 	</soft>

 	<hard_ele weights=talaris2013_downAla.wts >
 		<Reweight scoretype=aa_composition weight=1.0 />
 	</hard_ele>

 	<hard_bb weights=talaris2013_downAla.wts >
 		<Reweight scoretype=coordinate_constraint weight=2. />

 		<Reweight scoretype=cart_bonded weight = 0.5 />

 		<Reweight scoretype=pro_close weight=0.0/>

 	</hard_bb>

 </SCOREFXNS>


 <TASKOPERATIONS>

 	<IncludeCurrent name=current/>
 	<LimitAromaChi2 name=arochi />
 	<ExtraRotamersGeneric name=ex1_ex2 ex1=1 ex2=1/>
	<ExtraRotamersGeneric name=ex1 ex1=1/>
 	
 	<LayerDesign name=all_layers layer=others make_pymol_script=1 >
 		<CombinedTasks name=symmetric_interface_core>
			<SelectBySASA state=bound mode=mc core=1 probe_radius=2.0 core_asa=25 surface_asa=35 verbose=1/>
			<all copy_layer=core />
 			<Helix exclude="W,D,E,K,R"/>
		</CombinedTasks>

		
		<CombinedTasks name=symmetric_interface_surface>
			<SelectBySASA state=bound mode=mc surface=1 probe_radius=2.0 core_asa=25 surface_asa=35 verbose=1/>
			<all copy_layer=surface />
 			<Helix exclude="W"/>
		</CombinedTasks>
 
 	
 		<CombinedTasks name=symmetric_interface_boundary>
			<SelectBySASA state=bound mode=mc boundary=1 probe_radius=2.0 core_asa=25 surface_asa=35 verbose=1/>
 			<all copy_layer=boundary />
 			<Helix exclude="D,W"/>
 		</CombinedTasks>
 
 	</LayerDesign>

 <SelectBySASA name=select_core state=bound mode=mc core=1 probe_radius=2.0 core_asa=25 surface_asa=25 verbose=1/>
 <SelectBySASA name=select_boundary state=bound mode=mc boundary=1 probe_radius=2.0 core_asa=25 surface_asa=35 verbose=1/>
 <SelectBySASA name=select_surface state=bound mode=mc surface=1 probe_radius=2.0 core_asa=25 surface_asa=35 verbose=1/>
 <RestrictAbsentCanonicalAAS name=ala_only resnum=0 keep_aas="A" />
 
 </TASKOPERATIONS>


 <FILTERS>
 	<ShapeComplementarity name=sc_filter min_sc=0.0 verbose=1 jump=1 write_int_area=1 />
 	<PackStat name=packstat threshold=0.3 confidence=1/>
 </FILTERS>

 <MOVERS>
 	<PackRotamersMover name=transform_sc scorefxn=hard task_operations=ala_only/>
 	<AddConstraintsToCurrentConformationMover name=add_cst use_distance_cst=0 max_distance=12. coord_dev=2.5 min_seq_sep=8 />
	<ClearConstraintsMover name=clearconstraints/>
	<MinMover name=hardmin_bb scorefxn=hard_bb type=lbfgs_armijo_nonmonotone tolerance=0.0001 chi=1 bb=1 bondangle=1 bondlength=1 jump=all cartesian=1/>

	<AddCompositionConstraintMover name=addcomp1 filename="disfavour_polyLys.comp" />

 	<PackRotamersMover name=softpack_core scorefxn=soft task_operations=all_layers,select_core,current,arochi/>
 	<PackRotamersMover name=softpack_boundary scorefxn=soft task_operations=all_layers,select_boundary,current,arochi/>
	<PackRotamersMover name=softpack_surface scorefxn=soft task_operations=all_layers,select_surface,current,arochi/>

	<MinMover name=hardmin_sconly scorefxn=hard chi=1 bb=0 bondangle=0 bondlength=0/>

	<PackRotamersMover name=hardpack_core scorefxn=hard task_operations=all_layers,select_core,current,arochi,ex1_ex2/>
	<PackRotamersMover name=hardpack_boundary scorefxn=hard task_operations=all_layers,select_boundary,current,arochi,ex1_ex2/>
	<PackRotamersMover name=hardpack_surface scorefxn=hard_ele task_operations=all_layers,select_surface,current,arochi,ex1/>
	
 </MOVERS>

 <APPLY_TO_POSE>
 </APPLY_TO_POSE>

 <PROTOCOLS>
 	<Add mover=transform_sc/>
 	<Add mover=add_cst/>
 	<Add mover=hardmin_bb/>
 	<Add mover=clearconstraints/>
 	<Add mover=addcomp1/>
 	<Add mover=softpack_core/>
 	<Add mover=softpack_boundary/>
 	<Add mover=softpack_surface/>
 	<Add mover=hardmin_sconly/>
 	<Add mover=hardpack_core/>
 	<Add mover=hardpack_boundary/>
 	<Add mover=hardpack_surface/>
	<Add filter=packstat/>
 	<Add filter=sc_filter/>
 </PROTOCOLS>

</ROSETTASCRIPTS>